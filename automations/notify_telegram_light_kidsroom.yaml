- id: telegram_kidsroom_lights_status
  alias: "IK - Telegram - Light kids room"
  trigger:
    platform: event
    event_type: telegram_callback
    event_data:
      data: "/light_kids"
  action:
    - service: telegram_bot.edit_message
      data_template:
        message_id: "{{ trigger.event.data.message.message_id }}"
        chat_id: "{{ trigger.event.data.chat_id }}"
        title: '{{"\U0001F9F8"}} *Дитяча кімната*'
        message: >
          {{"__________________________________ \n"}}
          {% if is_state("light.kids_lamp", "on") %}{{"\U0001F4A1"}} Лампа дитячої кімнати увімкнена{% else %}Лампу дитячої кімнати вимкнено{% endif %}
        inline_keyboard:
          - '{% if is_state("light.kids_lamp", "on") %}Лампу дитячої вимкнути:/kidcl_off{% else %}Лампу дитячої увімкнути:/kidcl_on{% endif %}'
          - '{{ "\u21a9\ufe0f" }} Вибір кімнат:/lights, {{ "\u21a9\ufe0f" }} Панель керування:/to_cp'

- id: telegram_light_kidsroom_off
  alias: "IK - Telegram - Light kids room kidcl_off"
  trigger:
    platform: event
    event_type: telegram_callback
    event_data:
      data: "/kidcl_off"
  action:
    - service: light.turn_off
      data:
        entity_id: light.kids_lamp
        transition: 1
    - delay: "00:00:02"
    - service: telegram_bot.edit_message
      data_template:
        message_id: "{{ trigger.event.data.message.message_id }}"
        chat_id: "{{ trigger.event.data.chat_id }}"
        title: '{{"\U0001F9F8"}} *Дитяча кімната*'
        message: >
          {{"__________________________________ \n"}}
          {% if is_state("light.kids_lamp", "on") %}{{"\U0001F4A1"}} Лампа дитячої кімнати увімкнена{% else %}Лампу дитячої кімнати вимкнено{% endif %}
        inline_keyboard:
          - '{% if is_state("light.kids_lamp", "on") %}Лампу дитячої вимкнути:/kidcl_off{% else %}Лампу дитячої увімкнути:/kidcl_on{% endif %}'
          - '{{ "\u21a9\ufe0f" }} Вибір кімнат:/lights, {{ "\u21a9\ufe0f" }} Панель керування:/to_cp'

- id: telegram_light_kidsroom_on
  alias: "IK - Telegram - Light kids room kidcl_on"
  trigger:
    platform: event
    event_type: telegram_callback
    event_data:
      data: "/kidcl_on"
  action:
    - service: light.turn_on
      data:
        entity_id: light.kids_lamp
        brightness_pct: 100
        kelvin: 3700
        transition: 1
    - delay: "00:00:02"
    - service: telegram_bot.edit_message
      data_template:
        message_id: "{{ trigger.event.data.message.message_id }}"
        chat_id: "{{ trigger.event.data.chat_id }}"
        title: '{{"\U0001F9F8"}} *Дитяча кімната*'
        message: >
          {{"__________________________________ \n"}}
          {% if is_state("light.kids_lamp", "on") %}{{"\U0001F4A1"}} Лампа дитячої кімнати увімкнена{% else %}Лампу дитячої кімнати вимкнено{% endif %}
        inline_keyboard:
          - '{% if is_state("light.kids_lamp", "on") %}Лампу дитячої вимкнути:/kidcl_off{% else %}Лампу дитячої увімкнути:/kidcl_on{% endif %}'
          - '{{ "\u21a9\ufe0f" }} Вибір кімнат:/lights, {{ "\u21a9\ufe0f" }} Панель керування:/to_cp'
