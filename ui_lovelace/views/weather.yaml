title: Weather
path: weather
icon: mdi:weather-partly-cloudy
type: panel
cards:
  - type: custom:bootstrap-grid-card
    cards:
      - type: row
        cards:
          - type: custom:mushroom-chips-card
            class: col-xs-12
            chips:
              - type: back
              - type: menu
              - type: weather
                entity: weather.home
                show_conditions: true
                show_temperature: true
              - type: template
                content: "Dew point: {{int(states.sensor.dew_point.state)}} °C"
                icon: mdi:thermometer-alert
      - type: row
        cards:
          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-entity-card
            entity: sensor.weather_station_info
            icon_type: entity-picture
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-entity-card
            entity: sensor.moon_phase_image
            icon_type: entity-picture
            name: Moon Phase

          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-template-card
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            primary: >-
              Weather:
              {{state_attr('weather.openweathermap','temperature')|round}}°C, 
              {{(states.weather.openweathermap.state)|capitalize}},
              Wind speed {{ (state_attr('weather.openweathermap',
              'wind_speed')|float()/3.6) | round(2) }} m/s
            secondary: >-
              Precipitation {{ state_attr('weather.openweathermap',
              'forecast')[0].precipitation_probability }}%
            icon: >-
              {% if is_state("weather.openweathermap","clear-day") %}mdi:weather-sunny
              {% elif is_state("weather.openweathermap","sunny") %}mdi:weather-sunny
              {% elif is_state("weather.openweathermap","clear-night") %}mdi:weather-night
              {% elif is_state("weather.openweathermap","Clear,night") %}mdi:weather-night 
              {% elif is_state("weather.openweathermap","rainy") %}mdi:weather-rainy
              {% elif is_state("weather.openweathermap","snowy") %}mdi:weather-snowy
              {% elif is_state("weather.openweathermap","fogy") %}mdi:weather-fog
              {% elif is_state("weather.openweathermap","sleet") %}mdi:weather-partly-snowy-rainy
              {% elif is_state("weather.openweathermap","snowy-rainy") %}mdi:partly-snowy-rainy
              {% elif is_state("weather.openweathermap","wind") %}mdi:weather-windy
              {% elif is_state("weather.openweathermap","windy") %}mdi:weather-windy
              {% elif is_state("weather.openweathermap","cloudy") %}mdi:weather-cloudy
              {% elif is_state("weather.openweathermap","partly-cloudy-day") %}mdi:weather-partly-cloudy
              {% elif is_state("weather.openweathermap","partlycloudy") %}mdi:weather-partly-cloudy
              {% elif is_state("weather.openweathermap","partly-cloudy-night") %}mdi:weather-night-partly-cloudy
              {% elif is_state("weather.openweathermap","hail") %} mdi:weather-hail
              {% elif is_state("weather.openweathermap","lightning") %}mdi:weather-lightning
              {% elif is_state("weather.openweathermap","thunderstorm") %}mdi:weather-lightning-rainy
              {% endif %}
            entity: weather.openweathermap
            icon_color: |-
              {% if is_state("weather.openweathermap","clear-day") %}#d4f000
              {% elif is_state("weather.openweathermap","sunny") %}#d4f000
              {% elif is_state("weather.openweathermap","clear-night") %}#023bab
              {% elif is_state("weather.openweathermap","Clear,night") %}#023bab 
              {% elif is_state("weather.openweathermap","rainy") %}#00bfbc
              {% elif is_state("weather.openweathermap","snowy") %}#b6caf2
              {% elif is_state("weather.openweathermap","fogy") %}#b6caf2
              {% elif is_state("weather.openweathermap","sleet") %}#707580
              {% elif is_state("weather.openweathermap","snowy-rainy") %}#707580
              {% elif is_state("weather.openweathermap","wind") %}#9e0296
              {% elif is_state("weather.openweathermap","windy") %}#9e0296
              {% elif is_state("weather.openweathermap","cloudy") %}#7facad
              {% elif is_state("weather.openweathermap","partly-cloudy-day")%}#8996b0
              {% elif is_state("weather.openweathermap","partlycloudy") %}#8996b0
              {% elif is_state("weather.openweathermap","partly-cloudy-night")%}#7288b3
              {% elif is_state("weather.openweathermap","hail") %}#02749e
              {% elif is_state("weather.openweathermap","lightning") %}#f09400
              {% elif is_state("weather.openweathermap","thunderstorm") %}#e60000
              {% endif %}
          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-entity-card
            entity: sensor.wind_direction
            icon_type: entity-picture
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-entity-card
            entity: sensor.u_s_air_quality_index
            name: Air quality index
          - class: col-xs-12 col-md-6 col-lg-3
            type: custom:mushroom-template-card
            entity: sun.sun
            primary: >-
              Sunrise {{as_timestamp(state_attr('sun.sun', 'next_rising'))|
              timestamp_custom('%H:%M')}} / Sunset {{as_timestamp(state_attr('sun.sun',
              'next_setting'))| timestamp_custom('%H:%M')}}
            secondary: >-
              Dawn {{as_timestamp(state_attr('sun.sun', 'next_dawn'))|
              timestamp_custom('%H:%M')}} / Dusk {{as_timestamp(state_attr('sun.sun',
              'next_dusk'))| timestamp_custom('%H:%M')}}
            icon: >-
              {%set sunstate = states('sun.sun')%}{%if sunstate ==
              "above_horizon"%}mdi:weather-sunset-up{%else%}mdi:weather-sunset-down{%endif%}
            icon_color: >
              {%set color = states('sun.sun')%}{%if color ==
              "above_horizon"%}yellow{%else%}#0f4285{%endif%}
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            multiline_secondary: false
            layout: horizontal
