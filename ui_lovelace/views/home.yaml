title: home
path: home
icon: mdi:home
type: panel
cards:
  - type: custom:bootstrap-grid-card
    cards:
      - type: row
        cards:
          - type: custom:mushroom-chips-card
            class: col-xs-12
            chips:
              - type: back
              - type: menu
              - type: template
                content: "AQI - {%- if is_state('sensor.livingroom_aqi', 'unavailable') -%}?{%- else -%}{{states.sensor.livingroom_aqi.state-}}{%- endif -%}"
                icon: mdi:air-filter
                double_tap_action:
                  action: none
                tap_action:
                  action: none
                hold_action:
                  action: non
              - type: conditional
                conditions:
                  - entity: sensor.turned_on_lights
                    state_not: "0"
                chip:
                  type: template
                  icon_color: |-
                    {%set state = int(states.sensor.turned_on_lights.state)%}
                    {%if state == 0%}grey{%else%}yellow{%endif%}
                  icon: mdi:lightbulb-multiple-outline
                  double_tap_action:
                    action: none
                  tap_action:
                    action: navigate
                    navigation_path: /lovelace/lights
                  hold_action:
                    action: none
                  content: "{{int(states.sensor.turned_on_lights.state)}}"
                  entity: sensor.turned_on_light
              - type: conditional
                conditions:
                  - entity: sensor.opened_doors
                    state_not: "0"
                chip:
                  type: template
                  icon_color: |-
                    {%set state = int(states.sensor.opened_doors.state)%}
                    {%if state == 0%}grey{%else%}yellow{%endif%}
                  icon: mdi:door-open
                  double_tap_action:
                    action: none
                  tap_action:
                    action: navigate
                    navigation_path: /lovelace/doors
                  hold_action:
                    action: none
                  content: "{{int(states.sensor.opened_doors.state)}}"
                  entity: sensor.opened_doors
              - type: conditional
                conditions:
                  - entity: sensor.opened_windows
                    state_not: "0"
                chip:
                  type: template
                  icon_color: |-
                    {%set state = int(states.sensor.opened_windows.state)%}
                    {%if state == 0%}grey{%else%}yellow{%endif%}
                  icon: mdi:window-open-variant
                  double_tap_action:
                    action: none
                  tap_action:
                    action: navigate
                    navigation_path: /lovelace/doors
                  hold_action:
                    action: none
                  content: "{{int(states.sensor.opened_windows.state)}}"
                  entity: sensor.opened_windows
              - type: weather
                entity: weather.home
                show_conditions: true
                show_temperature: true
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/weather
              - type: conditional
                conditions:
                  - entity: sensor.update_val
                    state_not: "0"
                chip:
                  type: template
                  icon_color: green
                  icon: mdi:cellphone-arrow-down
                  double_tap_action:
                    action: none
                  tap_action:
                    action: navigate
                    navigation_path: /config/updates
                  hold_action:
                    action: none
                  content: "{{int(states.sensor.update_val.state)}}"
                  entity: sensor.update_val
              - type: conditional
                conditions:
                  - entity: sensor.ua_alarms
                    state_not: Safe
                chip:
                  type: template
                  entity: sensor.ua_alarms
                  card_mod:
                    style: |
                      ha-card {animation:pulse 1500ms infinite!important;}
                      @keyframes pulse{
                        0%{box-shadow:red 0 0 0 0;}
                        70%{box-shadow:#ff69b400 0 0 0 10px;}
                        100%{box-shadow:none;}
                      }
                  icon: >-
                    {%- if is_state("binary_sensor.teritorialna_gromada_air",
                    "on")%}mdi:cloud{%- elif
                    is_state("binary_sensor.teritorialna_gromada_artillery",
                    "on")%}mdi:tank{%- elif
                    is_state("binary_sensor.teritorialna_gromada_unknown","on")
                    %}mdi:check-circle{%- elif
                    is_state("binary_sensor.teritorialna_gromada_urban_fights","on")
                    %}mdi:pistol{%- elif is_state("binary_sensor.chemical",
                    "on")%}mdi:chemical-weapon{%- elif is_state("binary_sensor.nuclear",
                    "on") %}mdi:nuke{%- else %}mdi:shield-home{%- endif -%}
                  icon_color: red
                  content: "{{states.sensor.ua_alarms.state}} "
                  double_tap_action:
                    action: none
                  tap_action:
                    action: navigate
                    navigation_path: /lovelace/alerts
                  hold_action:
                    action: none
              # - type: template
              #   tap_action:
              #     action: assist
              #     pipeline_id: 01gzhqm91046hxn59enav6rjg1
              #   icon: mdi:message-processing-outline
              #   content: ""
              #   icon_color: blue
              # - type: template
              #   tap_action:
              #     action: assist
              #     pipeline_id: 01hbpcwmqehq65h12b2nq119m1
              #   icon: mdi:message-processing-outline
              #   content: ""
              #   icon_color: "#d2691e"

              - type: conditional
                conditions:
                  - condition: and
                    conditions:
                      - condition: numeric_state
                        entity: sensor.imap_hitweb_gmail_com
                        above: 0
                      - condition: user
                        users:
                          - ca6b753fa3864510837d851649a752d3
                chip:
                  type: entity
                  entity: sensor.imap_hitweb_gmail_com
                  tap_action:
                    action: url
                    url_path: https://mail.google.com/
                  hold_action:
                    action: none
                  double_tap_action:
                    action: none

      - type: row
        cards:
          - class: col-xs-12 col-md-3 pt-2
            type: custom:mushroom-template-card
            primary: >-
              {% set hour_num = now().hour | int %}

              {% if hour_num >=6 and hour_num <12 %}{{"\U00002600"}} Good
              morning,

              {% elif  hour_num>=12 and hour_num<17 %}{{"\U0001f31e"}} Good
              afternoon,

              {% elif hour_num>=17 and hour_num<22 %}{{"\U0001f31d"}} Good
              evening,

              {% else %}{{"\U0001f31a"}} Good night,{% endif %}  {{user}}!
            secondary: >-
              {%- set weekday_list
              =["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]
              %}

              {%- set month_list
              =['January','February','March','April','May','June','July','August','September','October','November','December']
              %}

              {%- set date = as_timestamp(now()) -%} {%- set wd_ok = date |
              timestamp_custom("%w") | int %} {%- set weekday =
              weekday_list[wd_ok-1] %}

              Today is {{ weekday }}, {{ now().day|int }}, {{
              month_list[now().month-1] }} {% if now().hour <10 %}0{% endif
              %}{{now().hour}}:{%- if now().minute <10 %}0{% endif
              -%}{{now().minute}}
            icon: |-
              {%- if is_state("person.risozhor", "home") 
              or is_state("person.maryna", "home") 
              or is_state("person.yaroslava", "home") -%}mdi:home
              {%- else -%}mdi:home-remove-outline{%- endif -%}
            tap_action:
              action: navigate
              navigation_path: /lovelace/floorplan
            hold_action:
              action: navigate
              navigation_path: /lovelace/floorplan
            double_tap_action:
              action: navigate
              navigation_path: /lovelace/floorplan
            badge_icon: >-
              {% if is_state("binary_sensor.teritorialna_gromada_air", "on")
              %}mdi:cloud

              {% elif
              is_state("binary_sensor.teritorialna_gromada_artillery", "on")
              %}mdi:tank

              {% elif is_state("binary_sensor.teritorialna_gromada_unknown",
              "on") %}mdi:check-circle

              {% elif
              is_state("binary_sensor.teritorialna_gromada_urban_fights",
              "on") %}mdi:pistol

              {% elif is_state("binary_sensor.chemical", "on")
              %}mdi:chemical-weapon

              {% elif is_state("binary_sensor.nuclear", "on") %}mdi:nuke

              {% else %}mdi:shield-home{% endif %}
            picture: ""
            badge_color: >-
              {% if is_state("binary_sensor.teritorialna_gromada_air", "on")
              %}red

              {% elif
              is_state("binary_sensor.teritorialna_gromada_artillery", "on")
              %}red

              {% elif is_state("binary_sensor.teritorialna_gromada_unknown",
              "on") %}red

              {% elif
              is_state("binary_sensor.teritorialna_gromada_urban_fights",
              "on") %}red

              {% elif is_state("binary_sensor.chemical", "on") %}red

              {% elif is_state("binary_sensor.nuclear", "on") %}red

              {% else %}green{% endif %}
            icon_color: |-
              {%- if is_state("person.risozhor", "home") 
              or is_state("person.maryna", "home") 
              or is_state("person.yaroslava", "home") -%}green
              {%- else -%}grey{%- endif -%}
          - class: col-xs-12 col-md-3 pt-2
            type: custom:mushroom-template-card
            entity: weather.openweathermap
            layout: horizontal
            fill_container: true
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            primary: >-
              Weather:
              {{state_attr('weather.openweathermap','temperature')|round}}°C, 
              {{(states.weather.openweathermap.state)|capitalize}},
              Wind speed {{ (state_attr('weather.openweathermap',
              'wind_speed')|float()/3.6) | round(2) }} m/s
            secondary: >-
              Precipitation {{ state_attr('weather.openweathermap',
              'forecast')[0].precipitation_probability }}%
            icon: >-
              {% if is_state("weather.openweathermap","clear-day") %}mdi:weather-sunny
              {% elif is_state("weather.openweathermap","sunny") %}mdi:weather-sunny
              {% elif is_state("weather.openweathermap","clear-night") %}mdi:weather-night
              {% elif is_state("weather.openweathermap","Clear,night") %}mdi:weather-night 
              {% elif is_state("weather.openweathermap","rainy") %}mdi:weather-rainy
              {% elif is_state("weather.openweathermap","snowy") %}mdi:weather-snowy
              {% elif is_state("weather.openweathermap","fogy") %}mdi:weather-fog
              {% elif is_state("weather.openweathermap","sleet") %}mdi:weather-partly-snowy-rainy
              {% elif is_state("weather.openweathermap","snowy-rainy") %}mdi:partly-snowy-rainy
              {% elif is_state("weather.openweathermap","wind") %}mdi:weather-windy
              {% elif is_state("weather.openweathermap","windy") %}mdi:weather-windy
              {% elif is_state("weather.openweathermap","cloudy") %}mdi:weather-cloudy
              {% elif is_state("weather.openweathermap","partly-cloudy-day") %}mdi:weather-partly-cloudy
              {% elif is_state("weather.openweathermap","partlycloudy") %}mdi:weather-partly-cloudy
              {% elif is_state("weather.openweathermap","partly-cloudy-night") %}mdi:weather-night-partly-cloudy
              {% elif is_state("weather.openweathermap","hail") %} mdi:weather-hail
              {% elif is_state("weather.openweathermap","lightning") %}mdi:weather-lightning
              {% elif is_state("weather.openweathermap","thunderstorm") %}mdi:weather-lightning-rainy
              {% endif %}
            icon_color: >-
              {% if is_state("weather.openweathermap","clear-day") %}#d4f000
              {% elif is_state("weather.openweathermap","sunny") %}#d4f000
              {% elif is_state("weather.openweathermap","clear-night") %}#023bab
              {% elif is_state("weather.openweathermap","Clear,night") %}#023bab 
              {% elif is_state("weather.openweathermap","rainy") %}#00bfbc
              {% elif is_state("weather.openweathermap","snowy") %}#b6caf2
              {% elif is_state("weather.openweathermap","fogy") %}#b6caf2
              {% elif is_state("weather.openweathermap","sleet") %}#707580
              {% elif is_state("weather.openweathermap","snowy-rainy") %}#707580
              {% elif is_state("weather.openweathermap","wind") %}#9e0296
              {% elif is_state("weather.openweathermap","windy") %}#9e0296
              {% elif is_state("weather.openweathermap","cloudy") %}#7facad
              {% elif is_state("weather.openweathermap","partly-cloudy-day")%}#8996b0
              {% elif is_state("weather.openweathermap","partlycloudy") %}#8996b0
              {% elif is_state("weather.openweathermap","partly-cloudy-night")%}#7288b3
              {% elif is_state("weather.openweathermap","hail") %}#02749e
              {% elif is_state("weather.openweathermap","lightning") %}#f09400
              {% elif is_state("weather.openweathermap","thunderstorm") %}#e60000
              {% endif %}
          - class: col-xs-12 col-md-3 pt-2
            type: custom:mushroom-template-card
            primary: Shopping List
            secondary: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              Click to see items
              {%- endif -%}
            icon: mdi:basket
            badge_icon: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              {%- if count < 10 -%}
              mdi:numeric-{{ count }}-circle
              {%- else -%}
              mdi:numeric-9-plus-circle
              {%- endif -%}
              {%- endif -%}
            entity: sensor.shopping_list
            badge_color: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              pink
              {%- endif -%}
            icon_color: "#ffb300"
            tap_action:
              action: navigate
              navigation_path: /lovelace/shopping-list

          - class: col-xs-12 col-md-3 pt-2
            type: custom:mushroom-template-card
            primary: Todo List
            secondary: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              Click to see items
              {%- endif -%}
            icon: mdi:clipboard-list
            badge_icon: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              {%- if count < 10 -%}
              mdi:numeric-{{ count }}-circle
              {%- else -%}
              numeric-9-plus-circle
              {%- endif -%}
              {%- endif -%}
            entity: sensor.todo_list_items_2
            badge_color: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              black
              {%- endif -%}
            icon_color: |-
              {% set count = states(entity) | int(default=0) %}
              {%- if count > 0 -%}
              blue
              {%- endif -%}

            tap_action:
              action: navigate
              navigation_path: /lovelace/todo

          # - class: col-xs-12 col-md-3 pt-2
          #   type: custom:mushroom-alarm-control-panel-card
          #   entity: alarm_control_panel.alarm_panel
          #   name: Alarm
          #   fill_container: false
          #   layout: horizontal
          # - class: col-xs-12 col-md-3 pt-2
          #   type: custom:energy-overview-card
          #   entities:
          #     - power: sensor.energy_cost
          #       voltage: sensor.voltage
          #       current: sensor.current
          #   card_mod:
          #     style: |
          #       ha-card {height: 100%;}
